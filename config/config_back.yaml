# =============================================================================
# Flood Forecast Data Downloader Configuration
# OPW - waterlevel.ie  (ZIP bulk download format)
# Lee Catchment, South Western RBD, Ireland
# Station list generated from station_overview_table.csv (2026-02-20)
# =============================================================================

# -- API Settings --------------------------------------------------------------
api:
  base_url: "https://waterlevel.ie"
  waterlevel_zip_url: "https://waterlevel.ie/hydro-data/data/internet/stations/0/{station_no}/S/Waterlevel_complete.zip"
  rainfall_zip_url:   "https://waterlevel.ie/hydro-data/data/internet/stations/0/{station_no}/Precip/Rainfall_complete.zip"
  zip_entry_name: "tsvalues.csv"
  timeout: 120
  max_retries: 3
  retry_backoff: 2.0
  rate_limit_delay: 1.0

# -- Processing ----------------------------------------------------------------
processing:
  resample_freq: "15min"   # native OPW resolution
  hourly_freq: "h"         # also produce hourly aggregates

# -- Data Quality --------------------------------------------------------------
quality:
  good_quality_code: 254
  max_gap_hours: 6
  min_record_fraction: 0.7
  # Lee catchment spans ~1.7 mAOD (Cork city tidal limit) to ~119 mAOD (Sullane headwaters)
  # OLD value [60, 120] was WRONG — it silently NaN'd 17 of 26 stations
  water_level_range: [0, 125]
  rainfall_range: [0, 100]   # mm per 15-min interval

# -- Active subset -------------------------------------------------------------
active_subset: "lee_full"

# -- Rainfall stations (shared across all subsets) ----------------------------
# Fill in lat/lon for 81901, 81902, 81904 from waterlevel.ie
rainfall_stations: &all_rain
  - {ref: "81901", name: "Crookstown",       lat: 51.8900, lon: -8.7900}   # PLACEHOLDER lat/lon
  - {ref: "81902", name: "Rain Gauge 81902", lat: 51.9000, lon: -8.9000}   # PLACEHOLDER lat/lon
  - {ref: "81903", name: "Ballingeary",      lat: 51.856816, lon: -9.233312}
  - {ref: "81904", name: "Rain Gauge 81904", lat: 51.9200, lon: -8.6000}   # PLACEHOLDER lat/lon

# ==============================================================================
# Station list — sourced directly from station_overview_table.csv
# Excluded: 19069 (Sea), 19160/19161/19163 (tidal/no-threshold), 19164 (tidal)
# Sorted upstream -> downstream by catchment area (km2)
#
# Per-station flood thresholds (mAOD) extracted from OPW percentile dataset:
#   p75_mAOD  — level exceeded 25% of time (elevated)
#   p90_mAOD  — level exceeded 10% of time (high)
#   amax_med  — median annual maximum (flood warning reference)
#   amax_high — highest recorded annual maximum (extreme flood reference)
#   gauge_datum — current gauge datum in mAOD
# These thresholds are used by the GNN flood loss weighting function.
# ==============================================================================

subsets:

  lee_full:
    description: "Full Lee catchment — 26 stations + 4 rain gauges"
    water_level_stations:

      - ref: "19056"
        name: "Ballincolly"
        water_body: "Glen Tributary"
        catchment_area_km2: 3.65
        lat: 51.92285
        lon: -8.45611
        p75_mAOD: 55.613
        p90_mAOD: 55.578
        amax_med: 56.125
        amax_high: 56.416
        gauge_datum: 55.603

      - ref: "19057"
        name: "Glen Park"
        water_body: "GLEN"
        catchment_area_km2: 7.85
        lat: 51.91294
        lon: -8.45212
        p75_mAOD: 35.914
        p90_mAOD: 35.789
        amax_med: 36.555
        amax_high: 37.151
        gauge_datum: 35.589

      - ref: "19058"
        name: "Blackpool Retail Park"
        water_body: "Bride (Cork)"
        catchment_area_km2: 10.76
        lat: 51.91658
        lon: -8.47343
        p75_mAOD: 10.948
        p90_mAOD: 10.978
        amax_med: 11.656
        amax_high: 12.486
        gauge_datum: 10.741

      - ref: "19059"
        name: "Glennamought Bridge"
        water_body: "Glen Tributary"
        catchment_area_km2: 17.41
        lat: 51.929203
        lon: -8.477429
        p75_mAOD: 40.738
        p90_mAOD: 40.602
        amax_med: 41.403
        amax_high: 42.134
        gauge_datum: 40.436

      - ref: "19045"
        name: "Gothic Bridge"
        water_body: "BLARNEY"
        catchment_area_km2: 22.40
        lat: 51.92805667
        lon: -8.558214444
        p75_mAOD: 27.845
        p90_mAOD: 27.717
        amax_med: 28.695
        amax_high: 29.505
        gauge_datum: 27.462

      - ref: "19110"
        name: "Cooleen Bridge"
        water_body: "TOON"
        catchment_area_km2: 29.97
        lat: 51.871
        lon: -9.07412
        p75_mAOD: 67.608
        p90_mAOD: 67.466
        amax_med: 68.271
        amax_high: 69.29
        gauge_datum: 67.335

      - ref: "19044"
        name: "Kilmona Bridge"
        water_body: "MARTIN"
        catchment_area_km2: 39.59
        lat: 51.98953389
        lon: -8.5885725
        p75_mAOD: 73.947
        p90_mAOD: 73.755
        amax_med: 74.924
        amax_high: 76.638
        gauge_datum: 73.411

      - ref: "19114"
        name: "Carrigrohane Bridge"
        water_body: "Curragheen"
        catchment_area_km2: 46.40
        lat: 51.889797
        lon: -8.540992
        p75_mAOD: 4.347
        p90_mAOD: 4.234
        amax_med: 5.354
        amax_high: 6.752
        gauge_datum: 3.981

      - ref: "19113"
        name: "County Hall"
        water_body: "Curragheen"
        catchment_area_km2: 47.62
        lat: 51.892643
        lon: -8.509638
        p75_mAOD: 2.485
        p90_mAOD: 2.381
        amax_med: 3.057
        amax_high: 4.131
        gauge_datum: 2.219

      - ref: "19112"
        name: "Coolmuckey Br"
        water_body: "Bride (Cork)"
        catchment_area_km2: 70.21
        lat: 51.86084
        lon: -8.783723
        p75_mAOD: 43.614
        p90_mAOD: 43.699
        amax_med: 44.385
        amax_high: 44.917
        gauge_datum: 43.162

      - ref: "19054"
        name: "Ballyvourney"
        water_body: "Sullane"
        catchment_area_km2: 71.59
        lat: 51.93931
        lon: -9.16104
        p75_mAOD: 116.823
        p90_mAOD: 116.72
        amax_med: 117.685
        amax_high: 119.065
        gauge_datum: 116.55

      - ref: "19111"
        name: "Killaclug"
        water_body: "Foherish"
        catchment_area_km2: 74.83
        lat: 51.911624
        lon: -9.02315
        p75_mAOD: 77.169
        p90_mAOD: 77.018
        amax_med: 78.268
        amax_high: 79.89
        gauge_datum: 76.753

      - ref: "19055"
        name: "Ballymakera"
        water_body: "Sullane"
        catchment_area_km2: 75.24
        lat: 51.934472
        lon: -9.146258
        p75_mAOD: 112.202
        p90_mAOD: 112.087
        amax_med: 113.117
        amax_high: 114.614
        gauge_datum: 111.938

      - ref: "19104"
        name: "Morris's Bridge"
        water_body: "Laney"
        catchment_area_km2: 82.11
        lat: 51.92933
        lon: -8.93616
        p75_mAOD: 100.437
        p90_mAOD: 100.235
        amax_med: 101.384
        amax_high: 102.752
        gauge_datum: 100.007

      - ref: "19107"
        name: "Dripsey Bridge"
        water_body: "Dripsey"
        catchment_area_km2: 82.17
        lat: 51.915989
        lon: -8.746053
        p75_mAOD: 46.369
        p90_mAOD: 46.244
        amax_med: 47.027
        amax_high: 48.005
        gauge_datum: 46.06

      - ref: "19108"
        name: "Bawnafinny Bridge"
        water_body: "BLARNEY"
        catchment_area_km2: 88.50
        lat: 51.93005
        lon: -8.58539
        p75_mAOD: 24.363
        p90_mAOD: 24.26
        amax_med: 25.043
        amax_high: 26.053
        gauge_datum: 24.063

      - ref: "19103"
        name: "Ovens Bridge"
        water_body: "Bride (Cork)"
        catchment_area_km2: 117.82
        lat: 51.880537
        lon: -8.654934
        p75_mAOD: 20.768
        p90_mAOD: 20.891
        amax_med: 21.403
        amax_high: 22.268
        gauge_datum: 20.441

      - ref: "19106"
        name: "Cooldaniel"
        water_body: "LEE"
        catchment_area_km2: 171.54
        lat: 51.85761
        lon: -9.02229
        p75_mAOD: 66.499
        p90_mAOD: 66.279
        amax_med: 67.262
        amax_high: 68.483
        gauge_datum: 66.014

      - ref: "19105"
        name: "Muskerry"
        water_body: "Shournagh"
        catchment_area_km2: 209.13
        lat: 51.914717
        lon: -8.60186
        p75_mAOD: 15.894
        p90_mAOD: 15.739
        amax_med: 17.085
        amax_high: 18.631
        gauge_datum: 15.536

      - ref: "19101"
        name: "Macroom Town Bridge"
        water_body: "Sullane"
        catchment_area_km2: 211.01
        lat: 51.906031
        lon: -8.962501
        p75_mAOD: 64.558
        p90_mAOD: 64.312
        amax_med: 66.195
        amax_high: 68.248
        gauge_datum: 64.063

      - ref: "19095"
        name: "Carrigadrohid Headrace"
        water_body: "LEE"
        catchment_area_km2: 617.15
        lat: 51.89700912
        lon: -8.86418388
        p75_mAOD: 60.575
        p90_mAOD: 60.308
        amax_med: 62.627
        amax_high: 64.72
        gauge_datum: 59.965

      - ref: "19094"
        name: "Inniscarra Headrace"
        water_body: "LEE"
        catchment_area_km2: 786.52
        lat: 51.900141
        lon: -8.661891
        p75_mAOD: 44.776
        p90_mAOD: 44.551
        amax_med: 46.784
        amax_high: 49.02
        gauge_datum: 44.295

      - ref: "19109"
        name: "Inniscarra Tailrace"
        water_body: "LEE"
        catchment_area_km2: 791.14
        lat: 51.89202
        lon: -8.63343
        p75_mAOD: 11.596
        p90_mAOD: 11.448
        amax_med: 12.71
        amax_high: 14.275
        gauge_datum: 11.172

      - ref: "19162"
        name: "Fitzgerald's Park"
        water_body: "LEE"
        catchment_area_km2: 1185.00
        lat: 51.896472
        lon: -8.498278
        p75_mAOD: 1.872
        p90_mAOD: 1.843
        amax_med: 2.248
        amax_high: 2.732
        gauge_datum: 1.762

      - ref: "19102"
        name: "Waterworks Weir"
        water_body: "LEE"
        catchment_area_km2: 1185.00
        lat: 51.893989
        lon: -8.510053
        p75_mAOD: 2.728
        p90_mAOD: 2.641
        amax_med: 3.312
        amax_high: 3.884
        gauge_datum: 2.533

      - ref: "19164"
        name: "Mercy Hospital"
        water_body: "LEE"
        catchment_area_km2: 1185.00
        lat: 51.90005
        lon: -8.48383
        p75_mAOD: 2.728
        p90_mAOD: 2.641
        amax_med: 3.312
        amax_high: 3.884
        gauge_datum: 2.954

    rainfall_stations: *all_rain

# -- Output --------------------------------------------------------------------
output:
  raw_rainfall_dir:    "C:/Users/AdikariAdikari/PycharmProjects/ST-GNN/dataset/raw/rainfall"
  raw_water_level_dir: "C:/Users/AdikariAdikari/PycharmProjects/ST-GNN/dataset/raw/water_level"
  metadata_dir:        "C:/Users/AdikariAdikari/PycharmProjects/ST-GNN/dataset/metadata"
  processed_dir:       "C:/Users/AdikariAdikari/PycharmProjects/ST-GNN/dataset/processed"

# -- Logging -------------------------------------------------------------------
logging:
  level: "INFO"
  log_file: "logs/downloader.log"
